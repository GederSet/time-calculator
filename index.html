<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <title>Сумма времени</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        padding: 20px;
      }
      .title {
        font-size: 22px;
        margin-bottom: 20px;
      }
      input,
      button {
        padding: 10px;
        font-size: 16px;
        margin-top: 10px;
        border-radius: 5px;
      }
      input {
        border: 1px solid black;
      }
      button {
        cursor: pointer;
        background-color: rgb(0, 153, 255);
        border: none;
        color: white;
      }
      #result {
        margin-top: 20px;
        font-size: 18px;
      }
    </style>
  </head>
  <body>
    <div class="title">Введите время (например: 30m 1h20m 50m 2h)</div>
    <input
      type="text"
      id="timeInput"
      placeholder="Пример: 30m 1h20m 50m 2h"
      size="40"
    />
    <br />
    <button onclick="calculateTotalTime()">Посчитать</button>

    <div id="result"></div>

    <script>
      function parseTimeString(timeStr) {
        let hours = 0,
          minutes = 0

        // Найдём "1h20m", "1h", "20m" и т.п.
        const hourMatch = timeStr.match(/(\d+)h/)
        const minuteMatch = timeStr.match(/(\d+)m/)

        if (hourMatch) {
          hours = parseInt(hourMatch[1], 10)
        }
        if (minuteMatch) {
          minutes = parseInt(minuteMatch[1], 10)
        }

        return { hours, minutes }
      }

      function sumTimes(timeStrings) {
        let totalMinutes = 0

        for (const timeStr of timeStrings) {
          const trimmed = timeStr.trim()
          if (trimmed === '') continue

          const { hours, minutes } = parseTimeString(trimmed)
          totalMinutes += hours * 60 + minutes
        }

        const finalHours = Math.floor(totalMinutes / 60)
        const finalMinutes = totalMinutes % 60

        return `${finalHours}h ${finalMinutes}m`
      }

      function calculateTotalTime() {
        const input = document.getElementById('timeInput').value
        const timeEntries = input.split(/\s+/) // Разделитель — один или несколько пробелов
        const total = sumTimes(timeEntries)
        document.getElementById(
          'result'
        ).textContent = `Суммарное время: ${total}`
      }

      // Обработка Enter в поле ввода
      document
        .getElementById('timeInput')
        .addEventListener('keypress', function (event) {
          if (event.key === 'Enter') {
            event.preventDefault()
            calculateTotalTime()
          }
        })
    </script>
  </body>
</html>
